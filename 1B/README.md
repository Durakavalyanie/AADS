Для ответа на запрос за O(1) используем префиксный массив по умножению. Чтобы избежать переполнения double, при создании префиксного массива берём числа по корню степени количества входных чисел, а при ответе на запрос, зная длину отрезка, приводим значение на отрезке к нужной степени.
